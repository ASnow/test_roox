gadgets=window.gadgets||{};shindig=window.shindig||{};osapi=window.osapi||{};var safeJSON=window.safeJSON,tamings___=window.tamings___||[],bridge___,caja___=window.caja___,___=window.___;
gadgets.log=function(){function a(a,b){var k=Array.prototype.slice.call(arguments,1);!(a<f)&&e&&(a===c&&e.warn?e.warn.apply?e.warn.apply(e,k):e.warn(b):a===d&&e.error?e.error.apply?e.error.apply(e,k):e.error(b):e.log&&(e.log.apply?e.log.apply(e,k):e.log(b)))}var b=function(b){var c=Array.prototype.slice.call(arguments,0);c.unshift(1);a.apply(null,c)};b.INFO=1;var c=2;b.WARNING=c;var d=3;b.ERROR=d;b.NONE=4;gadgets.warn=function(b){var d=Array.prototype.slice.call(arguments,0);d.unshift(c);a.apply(null,
d)};gadgets.error=function(b){var c=Array.prototype.slice.call(arguments,0);c.unshift(d);a.apply(null,c)};gadgets.setLogLevel=function(a){f=a};var f=1;(function(a){"true"!==function(){var b=a.localStorage,c=a.sessionStorage;return{getValue:function(a){var d;(d=c&&c.getItem(a))||(d=b&&b.getItem(a));return d}}}().getValue("com.roox.cm.Common.App.Properties.unit.IsLogEnabled")&&(f=4)})(window);var e=window.console?window.console:window.opera?window.opera.postError:void 0;return b}();
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets,"log"],[gadgets,"warn"],[gadgets,"error"],[gadgets,"setLogLevel"]]);caja___.whitelistProps([[gadgets.log,"INFO"],[gadgets.log,"WARNING"],[gadgets.log,"ERROR"],[gadgets.log,"NONE"]])});
window.gadgets.config||(gadgets.config=function(){function a(b,c){for(var d in c)c.hasOwnProperty(d)&&("object"===typeof b[d]&&"object"===typeof c[d]?a(b[d],c[d]):b[d]=c[d])}function b(a){var c="";if(3==a.nodeType||4==a.nodeType)c=a.nodeValue;else if(a.innerText)c=a.innerText;else if(a.innerHTML)c=a.innerHTML;else if(a.firstChild){c=[];for(a=a.firstChild;a;a=a.nextSibling)c.push(b(a));c=c.join("")}return c}function c(c){var d;d=document.scripts||document.getElementsByTagName("script");if(!d||0==d.length)d=
null;else{var f;if(e.u)for(var g=0;!f&&g<d.length;++g){var h=d[g];h.src&&0==h.src.indexOf(e.u)&&(f=h)}f||(f=d[d.length-1]);d=!f.src?null:f}if(d){var q;d=b(d);try{q=(new Function("return ("+d+"\n)"))()}catch(y){}if("object"!==typeof q){try{q=(new Function("return ({"+d+"\n})"))()}catch(u){}q="object"===typeof q?q:{}}e.f&&1==e.f.length&&!q[e.f[0]]&&(d={},d[e.f[0]]=q,q=d);a(c,q);(q=window.___cfg)&&a(c,q)}}function d(a){for(var b in g)if(g.hasOwnProperty(b))for(var c=g[b],d=0,e=c.length;d<e;++d)a(b,c[d])}
function f(){try{for(var a=window,b=null;a!==window.top;a=a.parent)if(b=a.__getConfigHook,"function"==typeof b)return b;b=a.__getConfigHook;return"function"==typeof b?b:null}catch(c){gadgets.warn("Unexpected exception while obtaining config hook "+c)}return null}var e,g={},h={};return{register:function(a,b,c,d){var e=g[a];e||(e=[],g[a]=e);e.push({validators:b||{},callback:c,callOnUpdate:d})},get:function(a){return a?h[a]||{}:h},init:function(b,g){e=window.___jsl||{};a(h,b);c(h);a(h,window.___config||
{});var m=f();m&&a(h,m()||{});d(function(a,b){var c=h[a];if(c&&!g){var d=b.validators,e;for(e in d)if(d.hasOwnProperty(e)&&!d[e](c[e]))throw Error('Invalid config value "'+c[e]+'" for parameter "'+e+'" in component "'+a+'"');}if(b.callback)try{b.callback(h)}catch(f){gadgets.error(f)}})},update:function(b,c){var e=[];d(function(a,d){(b.hasOwnProperty(a)||c&&h&&h[a])&&d.callback&&d.callOnUpdate&&e.push(d.callback)});h=c?{}:h||{};a(h,b);for(var f=0,g=e.length;f<g;++f)e[f](h)}}}());
(function(){gadgets.config.EnumValidator=function(a){var b=[];if(1<arguments.length)for(var c=0,d;d=arguments[c];++c)b.push(d);else b=a;return function(a){for(var c=0;b[c];++c)if(a===b[c])return!0;return!1}};gadgets.config.RegExValidator=function(a){return function(b){return a.test(b)}};gadgets.config.ExistsValidator=function(a){return"undefined"!==typeof a};gadgets.config.NonEmptyStringValidator=function(a){return"string"===typeof a&&0<a.length};gadgets.config.BooleanValidator=function(a){return"boolean"===
typeof a};gadgets.config.LikeValidator=function(a){return function(b){for(var c in a)if(a.hasOwnProperty(c)&&!(0,a[c])(b[c]))return!1;return!0}}})();gadgets.util=gadgets.util||{};gadgets.util.makeClosure=function(a,b,c){for(var d=[],f=2,e=arguments.length;f<e;++f)d.push(arguments[f]);return function(){for(var c=d.slice(),e=0,f=arguments.length;e<f;++e)c.push(arguments[e]);return b.apply(a,c)}};gadgets.util.makeEnum=function(a){var b,c,d={};for(b=0;c=a[b];++b)d[c]=c;return d};
gadgets.util=gadgets.util||{};
(function(){gadgets.util.createElement=function(a){var b;if(!document.body||document.body.namespaceURI)try{b=document.createElementNS("http://www.w3.org/1999/xhtml",a)}catch(c){}return b||document.createElement(a)};gadgets.util.createIframeElement=function(a){var b=gadgets.util.createElement("iframe");try{var c,d=["\x3c","iframe"],f=a||{},e;for(e in f)f.hasOwnProperty(e)&&(d.push(" "),d.push(e),d.push('\x3d"'),d.push(gadgets.util.escapeString(f[e])),d.push('"'));d.push("\x3e\x3c/");d.push("iframe");
d.push("\x3e");c=d.join("");var g=gadgets.util.createElement(c);if(g&&(!b||g.tagName==b.tagName&&g.namespaceURI==b.namespaceURI))b=g}catch(h){}c=b;a=a||{};for(var k in a)a.hasOwnProperty(k)&&(c[k]=a[k]);return b};gadgets.util.getBodyElement=function(){if(document.body)return document.body;try{var a=document.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","body");if(a&&1==a.length)return a[0]}catch(b){}return document.documentElement||document}})();gadgets.util=gadgets.util||{};
gadgets.util.attachBrowserEvent=function(a,b,c,d){"undefined"!=typeof a.addEventListener?a.addEventListener(b,c,d):"undefined"!=typeof a.attachEvent?a.attachEvent("on"+b,c):gadgets.warn("cannot attachBrowserEvent: "+b)};gadgets.util.removeBrowserEvent=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent?a.detachEvent("on"+b,c):gadgets.warn("cannot removeBrowserEvent: "+b)};gadgets.util=gadgets.util||{};
(function(){var a=[];gadgets.util.registerOnLoadHandler=function(b){a.push(b)};gadgets.util.runOnLoadHandlers=function(){gadgets.util.registerOnLoadHandler=function(a){a()};for(var b=0,c=a.length;b<c;++b)a[b]();a=void 0}})();tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"registerOnLoadHandler"]])});gadgets.util=gadgets.util||{};
(function(){function a(a,b){return String.fromCharCode(b)}var b={0:!1,10:!0,13:!0,34:!0,39:!0,60:!0,62:!0,92:!0,8232:!0,8233:!0,65282:!0,65287:!0,65308:!0,65310:!0,65340:!0};gadgets.util.escape=function(a,b){if(a){if("string"===typeof a)return gadgets.util.escapeString(a);if("array"===typeof a)for(var f=0,e=a.length;f<e;++f)a[f]=gadgets.util.escape(a[f]);else if("object"===typeof a&&b){f={};for(e in a)a.hasOwnProperty(e)&&(f[gadgets.util.escapeString(e)]=gadgets.util.escape(a[e],!0));return f}}return a};
gadgets.util.escapeString=function(a){if(!a)return a;for(var d=[],f,e,g=0,h=a.length;g<h;++g)f=a.charCodeAt(g),e=b[f],!0===e?d.push("\x26#",f,";"):!1!==e&&d.push(a.charAt(g));return d.join("")};gadgets.util.unescapeString=function(b){return!b?b:b.replace(/&#([0-9]+);/g,a)}})();tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"escape"],[gadgets.util,"escapeString"],[gadgets.util,"unescapeString"]])});gadgets.util=gadgets.util||{};
(function(){var a=null;gadgets.util.getUrlParameters=function(b){var c="undefined"===typeof b;if(null!==a&&c)return a;var d={};b=b||document.location.href;var f=b.indexOf("?"),e=b.indexOf("#");b=(-1===e?b.substr(f+1):[b.substr(f+1,e-f-1),"\x26",b.substr(e+1)].join("")).split("\x26");for(var f=window.decodeURIComponent?decodeURIComponent:unescape,e=0,g=b.length;e<g;++e){var h=b[e].indexOf("\x3d");if(-1!==h){var k=b[e].substring(0,h),h=b[e].substring(h+1),h=h.replace(/\+/g," ");try{d[k]=f(h)}catch(l){}}}c&&
(a=d);return d}})();gadgets.util.getUrlParameters();tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"getUrlParameters"]])});gadgets.util=gadgets.util||{};(function(){function a(a){b=a["core.util"]||{}}var b={},c={};gadgets.config&&gadgets.config.register("core.util",null,a);gadgets.util.getFeatureParameters=function(a){return"undefined"===typeof b[a]?null:b[a]};gadgets.util.hasFeature=function(a){return"undefined"!==typeof b[a]};gadgets.util.getServices=function(){return c}})();
tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"getFeatureParameters"],[gadgets.util,"hasFeature"]])});
shindig.Auth=function(){function a(a){for(var c=b.split("\x26"),e=0;e<c.length;e++){var g=c[e].split("\x3d");if(2===g.length){var h=g[0],g=g[1];"$"===g&&(g=encodeURIComponent(a[h]),c[e]=h+"\x3d"+g)}}b=c.join("\x26")}var b=null,c=null;gadgets.config.register("shindig.auth",null,function(d){var f=gadgets.util.getUrlParameters();d=d["shindig.auth"]||{};d.authToken?b=d.authToken:f.st&&(b=f.st);null!==b&&a(f);d.trustedJson&&(c=eval("("+d.trustedJson+")"))});return{getSecurityToken:function(){return b},
updateSecurityToken:function(a){b=a},getTrustedData:function(){return c}}};shindig.auth=new shindig.Auth;gadgets.rpctx=gadgets.rpctx||{};
gadgets.rpctx.wpm||(gadgets.rpctx.wpm=function(){function a(a,b,c){"undefined"!=typeof window.addEventListener?window.addEventListener(a,b,c):"undefined"!=typeof window.attachEvent&&window.attachEvent("on"+a,b)}function b(a){var b=gadgets.json.parse(a.data);if(b&&b.f){var d=gadgets.rpc.getTargetOrigin(b.f);(!f||!("undefined"!==typeof a.origin?a.origin!==d:a.domain!==/^.+:\/\/([^:]+).*/.exec(d)[1]))&&c(b,a.origin)}}var c,d,f=!0;return{getCode:function(){return"wpm"},isParentVerifiable:function(){return!0},
init:function(e,g){gadgets.config.register("rpc",null,function(a){if("true"===String((a?a.rpc:{}).disableForceSecure))f=!1});c=e;d=g;a("message",b,!1);d("..",!0);return!0},setup:function(a,b){d(a,!0);return!0},call:function(a,b,c){var d=gadgets.rpc.getTargetOrigin(a),f=gadgets.rpc._getTargetWin(a);d?window.setTimeout(function(){f.postMessage(gadgets.json.stringify(c),d)},0):gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message");return!0}}}());
gadgets.rpctx=gadgets.rpctx||{};
gadgets.rpctx.flash||(gadgets.rpctx.flash=function(){function a(a,b){F[b]=F[b]||function(){a.apply({},arguments)};return D+"."+b}function b(){if(null===q&&document.body&&l){var a=l+"?cb\x3d"+Math.random()+"\x26origin\x3d"+E+"\x26jsl\x3d1",c=document.createElement("div");c.style.height="1px";c.style.width="1px";a='\x3cobject height\x3d"1" width\x3d"1" id\x3d"'+k+'" type\x3d"application/x-shockwave-flash"\x3e\x3cparam name\x3d"allowScriptAccess" value\x3d"always"\x3e\x3c/param\x3e\x3cparam name\x3d"movie" value\x3d"'+a+
'"\x3e\x3c/param\x3e\x3cembed type\x3d"application/x-shockwave-flash" allowScriptAccess\x3d"always" src\x3d"'+a+'" height\x3d"1" width\x3d"1"\x3e\x3c/embed\x3e\x3c/object\x3e';document.body.appendChild(c);c.innerHTML=a;q=c.firstChild}++w;null!==r&&(null!==q||w>=u)?window.clearTimeout(r):r=window.setTimeout(b,y)}function c(){B[".."]||(h(".."),z++,z>=G&&null!==t?(window.clearTimeout(t),t=null):t=window.setTimeout(c,x))}function d(){if(null!==q&&q.setup)for(;0<s.length;){var a=s.shift(),b=a.targetId;
q.setup(a.token,".."===b?gadgets.rpc.RPC_ID:b,".."===b?"INNER":"OUTER")}null!==r&&window.clearTimeout(r);r=null}function f(){!B[".."]&&null===t&&(t=window.setTimeout(c,x))}function e(a,b,c){b=gadgets.rpc.getTargetOrigin(a);var d=gadgets.rpc.getAuthToken(a);q["sendMessage_"+(".."===a?gadgets.rpc.RPC_ID:a)+"_"+d+"_"+(".."===a?"INNER":"OUTER")].call(q,gadgets.json.stringify(c),b);return!0}function g(a,b,c){var d=gadgets.json.parse(a);(a=d[v])?(A(a,!0),B[a]=!0,".."!==a&&h(a,!0)):window.setTimeout(function(){p(d,
b)},0)}function h(a,b){var c=gadgets.rpc.RPC_ID,d={};d[v]=b?"..":c;d[n]=c;e(a,c,d)}var k="___xpcswf",l=null,m=!1,p=null,A=null,q=null,y=100,u=50,s=[],r=null,w=0,v="_scr",n="_pnt",x=100,G=50,z=0,t=null,B={},E=window.location.protocol+"//"+window.location.host,D,F=function(){window.___jsl=window.___jsl||{};var a=window.___jsl._fm={};D="___jsl._fm";return a}();gadgets.config.register("rpc",null,function(a){m&&(l=a.rpc.commSwf||"//xpc.googleusercontent.com/gadgets/xpc.swf")});a(d,"ready");a(f,"setupDone");
a(g,"receiveMessage");return{getCode:function(){return"flash"},isParentVerifiable:function(){return!0},init:function(a,b){p=a;A=b;return m=!0},setup:function(a,c){s.push({token:c,targetId:a});null===q&&null===r&&(r=window.setTimeout(b,y));return!0},call:e,_receiveMessage:g,_ready:d,_setupDone:f}}());gadgets.rpctx=gadgets.rpctx||{};
gadgets.rpctx.frameElement||(gadgets.rpctx.frameElement=function(){function a(a,f,h){try{if(".."!==f){var k=window.frameElement;if("function"===typeof k[b])return"function"!==typeof k[b][c]&&(k[b][c]=function(a){d(gadgets.json.parse(a))}),k[b](gadgets.json.stringify(h)),!0}else{var l=document.getElementById(a);if("function"===typeof l[b]&&"function"===typeof l[b][c])return l[b][c](gadgets.json.stringify(h)),!0}}catch(m){}return!1}var b="__g2c_rpc",c="__c2g_rpc",d,f;return{getCode:function(){return"fe"},
isParentVerifiable:function(){return!1},init:function(a,b){d=a;f=b;return!0},setup:function(a,c){if(".."!==a)try{document.getElementById(a)[b]=function(a){d(gadgets.json.parse(a))}}catch(h){return!1}".."===a&&(f("..",!0),gadgets.util.registerOnLoadHandler(function(){window.setTimeout(function(){gadgets.rpc.call(a,gadgets.rpc.ACK)},500)}));return!0},call:function(b,c,d){return a(b,c,d)}}}());gadgets.rpctx=gadgets.rpctx||{};
gadgets.rpctx.nix||(gadgets.rpctx.nix=function(){function a(){var h=f[".."];if(!h)if(++g>c)gadgets.warn("Nix transport setup failed, falling back..."),e("..",!1);else{if(!h&&(window.opener&&"GetAuthToken"in window.opener)&&(h=window.opener,h.GetAuthToken()==gadgets.rpc.getAuthToken(".."))){var k=gadgets.rpc.getAuthToken("..");h.CreateChannel(window[b]("..",k),k);f[".."]=h;window.opener=null;e("..",!0);return}window.setTimeout(function(){a()},d)}}var b="GRPC____NIXVBS_get_wrapper",c=10,d=500,f={},
e,g=0;return{getCode:function(){return"nix"},isParentVerifiable:function(){return!1},init:function(a,c){e=c;if("unknown"!==typeof window[b]){window.GRPC____NIXVBS_handle_message=function(b){window.setTimeout(function(){a(gadgets.json.parse(b))},0)};window.GRPC____NIXVBS_create_channel=function(a,b,c){gadgets.rpc.getAuthToken(a)===c&&(f[a]=b,e(a,!0))};var d="Class GRPC____NIXVBS_wrapper\n Private m_Intended\nPrivate m_Auth\nPublic Sub SetIntendedName(name)\n If isEmpty(m_Intended) Then\nm_Intended \x3d name\nEnd If\nEnd Sub\nPublic Sub SetAuth(auth)\n If isEmpty(m_Auth) Then\nm_Auth \x3d auth\nEnd If\nEnd Sub\nPublic Sub SendMessage(data)\n GRPC____NIXVBS_handle_message(data)\nEnd Sub\nPublic Function GetAuthToken()\n GetAuthToken \x3d m_Auth\nEnd Function\nPublic Sub CreateChannel(channel, auth)\n Call GRPC____NIXVBS_create_channel(m_Intended, channel, auth)\nEnd Sub\nEnd Class\nFunction "+
b+"(name, auth)\nDim wrap\nSet wrap \x3d New GRPC____NIXVBS_wrapper\nwrap.SetIntendedName name\nwrap.SetAuth auth\nSet "+b+" \x3d wrap\nEnd Function";try{window.execScript(d,"vbscript")}catch(g){return!1}}return!0},setup:function(c,d){if(".."===c)return a(),!0;try{var e=document.getElementById(c),f=window[b](c,d);e.contentWindow.opener=f}catch(g){return!1}return!0},call:function(a,b,c){try{f[a]&&f[a].SendMessage(gadgets.json.stringify(c))}catch(d){return!1}return!0}}}());
gadgets.rpctx=gadgets.rpctx||{};
gadgets.rpctx.rmr||(gadgets.rpctx.rmr=function(){function a(a,b,c,d){var e=function(){document.body.appendChild(a);a.src="about:blank";d&&(a.onload=function(){f(d)});a.src=b+"#"+c};document.body?e():gadgets.util.registerOnLoadHandler(function(){e()})}function b(a){var c=null;k[a].searchCounter++;try{var d=gadgets.rpc._getTargetWin(a),c=".."===a?d.frames["rmrtransport-"+gadgets.rpc.RPC_ID]:d.frames["rmrtransport-.."]}catch(f){}d=!1;c&&(d=e(a,c));!d&&!(k[a].searchCounter>h)&&window.setTimeout(function(){b(a)},
g)}function c(a,b,c,e){var f=null;if(f=".."!==c?k[".."]:k[a]){b!==gadgets.rpc.ACK&&f.queue.push(e);if(f.waiting||0===f.queue.length&&!(b===gadgets.rpc.ACK&&e&&!0===e.ackAlone))return!0;0<f.queue.length&&(f.waiting=!0);a=f.relayUri+"#"+d(a);try{f.frame.contentWindow.location=a;var g=10==f.width?20:10;f.frame.style.width=g+"px";f.width=g}catch(h){return!1}}return!0}function d(a){a=k[a];var b={id:a.sendId};if(a){b.d=Array.prototype.slice.call(a.queue,0);var c={s:gadgets.rpc.ACK,id:a.recvId};a.originVerified||
(c.sendToken=a.verifySendToken);a.verifyRecvToken&&(c.recvToken=a.verifyRecvToken);b.d.push(c)}return gadgets.json.stringify(b)}function f(a){for(var b=k[a],d=b.receiveWindow.location.hash.substring(1),f=gadgets.json.parse(decodeURIComponent(d))||{},d=f.d||[],e=!1,g=!1,h=0,f=b.recvId-f.id,l=0;l<d.length;++l){var n=d[l];if(n.s===gadgets.rpc.ACK){p(a,!0);b.verifyRecvToken=n.sendToken;!b.originVerified&&(n.recvToken&&String(n.recvToken)==String(b.verifySendToken))&&(b.originVerified=!0);b.waiting&&(g=
!0);b.waiting=!1;var x=Math.max(0,n.id-b.sendId);b.queue.splice(0,x);b.sendId=Math.max(b.sendId,n.id||0)}else e=!0,++h<=f||(++b.recvId,m(n,b.originVerified?b.relayOrigin:void 0))}if(e||g&&0<b.queue.length)c(a,gadgets.rpc.ACK,".."===a?gadgets.rpc.RPC_ID:"..",{ackAlone:e})}function e(b,c){function e(){f(b)}var g=k[b];try{var h=!1,h="document"in c;if(!h)return!1;h="object"==typeof c.document;if(!h||"about:blank"===c.location.href)return!1}catch(l){return!1}g.receiveWindow=c;"undefined"===typeof c.attachEvent?
c.onresize=e:c.attachEvent("onresize",e);".."===b?a(g.frame,g.relayUri,d(b),b):f(b);return!0}var g=500,h=10,k={},l=gadgets.util.getUrlParameters().parent,m,p;return{getCode:function(){return"rmr"},isParentVerifiable:function(){return!0},init:function(a,b){m=a;p=b;return!0},setup:function(c,e){try{if("object"!==typeof k[c]){var f=document.createElement("iframe"),g=f.style;g.position="absolute";g.top="0px";g.border="0";g.opacity="0";g.width="10px";g.height="1px";f.id="rmrtransport-"+c;f.name=f.id;var h=
gadgets.rpc.getRelayUrl(c),p=gadgets.rpc.getOrigin(l);h||(h=p+"/robots.txt");k[c]={frame:f,receiveWindow:null,relayUri:h,relayOrigin:p,searchCounter:0,width:10,waiting:!0,queue:[],sendId:0,recvId:0,verifySendToken:String(Math.random()),verifyRecvToken:null,originVerified:!1};".."!==c&&a(f,h,d(c));b(c)}}catch(m){return gadgets.warn("Caught exception setting up RMR: "+m),!1}return!0},call:function(a,b,d){return c(a,d.s,b,d)}}}());gadgets.rpctx=gadgets.rpctx||{};
gadgets.rpctx.ifpc||(gadgets.rpctx.ifpc=function(){function a(a){for(var b=[],c=0,d=a.length;c<d;++c)b.push(encodeURIComponent(gadgets.json.stringify(a[c])));return b.join("\x26")}function b(a){for(var b,d=c.length-1;0<=d;--d){var f=c[d];try{if(f&&(f.recyclable||"complete"===f.readyState))if(f.parentNode.removeChild(f),window.ActiveXObject)c[d]=f=null,c.splice(d,1);else{f.recyclable=!1;b=f;break}}catch(e){}}b||(b=document.createElement("iframe"),b.style.border=b.style.width=b.style.height="0px",b.style.visibility=
"hidden",b.style.position="absolute",b.onload=function(){this.recyclable=!0},c.push(b));b.src=a;window.setTimeout(function(){document.body.appendChild(b)},0)}var c=[],d=0,f,e={};return{getCode:function(){return"ifpc"},isParentVerifiable:function(){return!0},init:function(a,b){f=b;f("..",!0);return!0},setup:function(a,b){f(a,!0);return!0},call:function(c,f,e){var l=gadgets.rpc.getRelayUrl(c);++d;if(!l)return gadgets.warn("No relay file assigned for IFPC"),!1;var m=null,p=[];if(e.l)m=[l,"#",a([f,d,
1,0,a([f,e.s,"","",f].concat(e.a))])].join(""),p.push(m);else{m=[l,"#",c,"\x26",f,"@",d,"\x26"].join("");c=encodeURIComponent(gadgets.json.stringify(e));f=2E3-m.length;e=Math.ceil(c.length/f);for(var l=0,A;0<c.length;)A=c.substring(0,f),c=c.substring(f),p.push([m,e,"\x26",l,"\x26",A].join("")),l+=1}do b(p.shift());while(0<p.length);return!0},_receiveMessage:function(a,b){var c=a[1],d=parseInt(a[2],10),f=parseInt(a[3],10),p=a[a.length-1],A=1===d;if(1<d){e[c]||(e[c]=[]);e[c][f]=p;a:{for(d-=1;0<=d;--d)if("undefined"===
typeof e[c][d]){d=!1;break a}d=!0}d&&(p=e[c].join(""),delete e[c],A=!0)}A&&b(gadgets.json.parse(decodeURIComponent(p)))}}}());
window.gadgets.rpc||(gadgets.rpc=function(){function a(a,b){if(!E[a]){var c=C;b||(c=I);E[a]=c;for(var d=D[a]||[],f=0;f<d.length;++f){var e=d[f];e.t=n[a];c.call(a,e.f,e)}D[a]=[]}}function b(){function a(){O=!0}P||("undefined"!=typeof window.addEventListener?window.addEventListener("unload",a,!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onunload",a),P=!0)}function c(a,c,d,f,e){if(!n[c]||n[c]!==d)gadgets.error("Invalid auth token. "+n[c]+" vs "+d),H(c,M);e.onunload=function(){z[c]&&
!O&&(H(c,Q),gadgets.rpc.removeReceiver(c))};b();f=gadgets.json.parse(decodeURIComponent(f))}function d(b,c){if(b&&"string"===typeof b.s&&"string"===typeof b.f&&b.a instanceof Array)if(n[b.f]&&n[b.f]!==b.t&&(gadgets.error("Invalid auth token. "+n[b.f]+" vs "+b.t),H(b.f,M)),"__ack"===b.s)window.setTimeout(function(){a(b.f,!0)},0);else{b.c&&(b.callback=function(a){gadgets.rpc.call(b.f,"__cb",null,b.c,a)});if(c){var d=f(c);b.origin=c;var e=b.r;if(!e||f(e)!=d)e=c;b[s]=e}d=(r[b.s]||r[""]).apply(b,b.a);
b.c&&"undefined"!==typeof d&&gadgets.rpc.call(b.f,"__cb",null,b.c,d)}}function f(a){if(!a)return"";if(0==a.indexOf("file:"))return"file://";a=a.toLowerCase();0==a.indexOf("//")&&(a=window.location.protocol+a);-1==a.indexOf("://")&&(a=window.location.protocol+"//"+a);var b=a.substring(a.indexOf("://")+3),c=b.indexOf("/");-1!=c&&(b=b.substring(0,c));a=a.substring(0,a.indexOf("://"));var c="",d=b.indexOf(":");if(-1!=d){var f=b.substring(d+1),b=b.substring(0,d);if("http"===a&&"80"!==f||"https"===a&&"443"!==
f)c=":"+f}return a+"://"+b+c}function e(a){if("/"==a.charAt(0)){var b=a.indexOf("|"),c=0<b?a.substring(1,b):a.substring(1);a=0<b?a.substring(b+1):null;return{id:c,origin:a}}return null}function g(a){if("undefined"===typeof a||".."===a)return window.parent;var b=e(a);if(b)return window.top.frames[b.id];a=String(a);return(b=document.getElementById(a))&&b.contentWindow?b.contentWindow:(b=window.frames[a])&&!b.closed?b:null}function h(a,b){if(!0!==z[a]){"undefined"===typeof z[a]&&(z[a]=0);var c=g(a);
(".."===a||null!=c)&&!0===C.setup(a,b)?z[a]=!0:!0!==z[a]&&10>z[a]++?window.setTimeout(function(){h(a,b)},500):(E[a]=I,z[a]=!0)}}function k(a,b){var c=g(a);if(!t[a]||t[a]!==J&&c.Function.prototype!==t[a].constructor.prototype){var d=l(a);if(f(d)!==f(window.location.href))return t[a]=J,!1;try{t[a]=c.gadgets.rpc.receiveSameDomain}catch(e){return t[a]=J,!1}}return t[a]&&t[a]!==J?(t[a](b),!0):!1}function l(a){(a=w[a])&&"/"===a.substring(0,1)&&(a="/"===a.substring(1,2)?document.location.protocol+a:document.location.protocol+
"//"+document.location.host+a);return a}function m(a,b,c){/http(s)?:\/\/.+/.test(b)||(0==b.indexOf("//")?b=window.location.protocol+b:"/"==b.charAt(0)?b=window.location.protocol+"//"+window.location.host+b:-1==b.indexOf("://")&&(b=window.location.protocol+"//"+b));w[a]=b;"undefined"!==typeof c&&(v[a]=!!c)}function p(a,b){b=b||"";n[a]=String(b);h(a,b)}function A(a){a=(a.passReferrer||"").split(":",2);F=a[0]||"none";K=a[1]||"origin"}function q(b){"true"===String(b.useLegacyProtocol)&&(C=gadgets.rpctx.ifpc,
C.init(d,a))}function y(a,b){function c(d){d=d?d.rpc:{};A(d);var e=d.parentRelayUrl||"",e=f(B.parent||b)+e;m("..",e,"true"===String(d.useLegacyProtocol));q(d);p("..",a)}!B.parent&&b?c({}):gadgets.config.register("rpc",null,c)}function u(a,b,c){if(".."===a)y(c||B.rpctoken||B.ifpctok||"",b);else a:{var d=null;if("/"!=a.charAt(0)){if(!gadgets.util)break a;d=document.getElementById(a);if(!d)throw Error("Cannot set up gadgets.rpc receiver with ID: "+a+", element not found.");}d=d&&d.src;b=b||gadgets.rpc.getOrigin(d);
m(a,b);b=gadgets.util.getUrlParameters(d);p(a,c||b.rpctoken)}}var s="referer",r={},w={},v={},n={},x=0,G={},z={},t={},B={},E={},D={},F=null,K=null,S=window.top!==window.self,L=window.name,H=function(){},Q=1,M=2,N=window.console,R=N&&N.log&&function(a){N.log(a)}||function(){},I=function(){function a(b){return function(){R(b+": call ignored")}}return{getCode:function(){return"noop"},isParentVerifiable:function(){return!0},init:a("init"),setup:a("setup"),call:a("call")}}();gadgets.util&&(B=gadgets.util.getUrlParameters());
var O=!1,P=!1,C="flash"==B.rpctx?gadgets.rpctx.flash:"rmr"==B.rpctx?gadgets.rpctx.rmr:"function"===typeof window.postMessage?gadgets.rpctx.wpm:"object"===typeof window.postMessage?gadgets.rpctx.wpm:window.ActiveXObject?gadgets.rpctx.flash?gadgets.rpctx.flash:gadgets.rpctx.nix:0<navigator.userAgent.indexOf("WebKit")?gadgets.rpctx.rmr:"Gecko"===navigator.product?gadgets.rpctx.frameElement:gadgets.rpctx.ifpc;r[""]=function(){R("Unknown RPC service: "+this.s)};r.__cb=function(a,b){var c=G[a];c&&(delete G[a],
c.call(this,b))};var J={};return{config:function(a){"function"===typeof a.securityCallback&&(H=a.securityCallback)},register:function(a,b){if("__cb"===a||"__ack"===a)throw Error("Cannot overwrite callback/ack service");if(""===a)throw Error("Cannot overwrite default service: use registerDefault");r[a]=b},unregister:function(a){if("__cb"===a||"__ack"===a)throw Error("Cannot delete callback/ack service");if(""===a)throw Error("Cannot delete default service: use unregisterDefault");delete r[a]},registerDefault:function(a){r[""]=
a},unregisterDefault:function(){delete r[""]},forceParentVerifiable:function(){C.isParentVerifiable()||(C=gadgets.rpctx.ifpc)},call:function(a,b,c,d){a=a||"..";var f="..";".."===a?f=L:"/"==a.charAt(0)&&(f=gadgets.rpc.getOrigin(window.location.href),f="/"+L+(f?"|"+f:""));++x;c&&(G[x]=c);var g={s:b,f:f,c:c?x:0,a:Array.prototype.slice.call(arguments,3),t:n[a],l:!!v[a]},h;a:if("bidir"===F||"c2p"===F&&".."===a||"p2c"===F&&".."!==a){h=window.location.href;var p="?";if("query"===K)p="#";else if("hash"===
K)break a;p=h.lastIndexOf(p);p=-1===p?h.length:p;h=h.substring(0,p)}else h=null;h&&(g.r=h);!(".."!==a&&null==e(a)&&!document.getElementById(a))&&!k(a,g)&&(h=E[a],!h&&null!==e(a)&&(h=C),h?(v[a]&&(h=gadgets.rpctx.ifpc),!1===h.call(a,f,g)&&(E[a]=I,C.call(a,f,g))):D[a]?D[a].push(g):D[a]=[g])},getRelayUrl:l,setRelayUrl:m,setAuthToken:p,setupReceiver:u,getAuthToken:function(a){return n[a]},removeReceiver:function(a){delete w[a];delete v[a];delete n[a];delete z[a];delete t[a];delete E[a]},getRelayChannel:function(){return C.getCode()},
receive:function(a,b){4<a.length?C._receiveMessage(a,d):c.apply(null,a.concat(b))},receiveSameDomain:function(a){a.a=Array.prototype.slice.call(a.a);window.setTimeout(function(){d(a)},0)},getOrigin:f,getTargetOrigin:function(a){var b=null,b=l(a);b||(b=(b=e(a))?b.origin:".."==a?B.parent:document.getElementById(a).src);return f(b)},init:function(){!1===C.init(d,a)&&(C=I);S?u(".."):gadgets.config.register("rpc",null,function(a){a=a.rpc||{};A(a);q(a)})},_getTargetWin:g,_parseSiblingId:e,ACK:"__ack",RPC_ID:L||
"..",SEC_ERROR_LOAD_TIMEOUT:0,SEC_ERROR_FRAME_PHISH:Q,SEC_ERROR_FORGED_MSG:M}}(),gadgets.rpc.init());
shindig.uri=function(){var a=/^(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/;return function(b){function c(b){if(null===b.match(a))throw"Malformed URL: "+b;u=RegExp.$1;s=RegExp.$2;r=RegExp.$3;w=RegExp.$4;n=RegExp.$5}function d(a){for(var b=[],c=0,d=a.length;c<d;++c){var f=a[c][0],e=a[c][1];void 0!==e&&b.push(z(f)+(null!==e?"\x3d"+z(e):""))}return b.join("\x26")}function f(){v&&(w=d(v),v=null);return w}function e(){x&&(n=d(x),x=null);return n}function g(a){v=v||p(w);return A(v,
a)}function h(a){x=x||p(n);return A(x,a)}function k(a,b){v=q(v||p(w),a,b);return t}function l(a,b){x=q(x||p(n),a,b);return t}function m(){return[u,""!==u?":":"",""!==s?"//":"",s].join("")}function p(a){var b=[];a=a.split("\x26");for(var c=0,d=a.length;c<d;++c){var f=a[c].split("\x3d"),e=f.shift(),g=null;0<f.length&&(g=f.join("").replace(/\+/g," "));b.push([e,null!=g?G(g):null])}return b}function A(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c][0]==b)return a[c][1]}function q(a,b,c){var d=b;"string"===
typeof b&&(d={},d[b]=c);for(var f in d){b=!1;c=0;for(var e=a.length;!b&&c<e;++c)a[c][0]==f&&(a[c][1]=d[f],b=!0);b||a.push([f,d[f]])}return a}function y(a,b){a=a||"";a[0]===b&&(a=a.substr(b.length));return a}var u="",s="",r="",w="",v=null,n="",x=null,G=window.decodeURIComponent?decodeURIComponent:unescape,z=window.encodeURIComponent?encodeURIComponent:escape,t=null;"object"===typeof b&&"function"===typeof b.toString?c(b.toString()):b&&c(b);return t={getSchema:function(){return u},getAuthority:function(){return s},
getOrigin:m,getPath:function(){return r},getQuery:f,getFragment:e,getQP:g,getFP:h,setSchema:function(a){u=a;return t},setAuthority:function(a){s=a;return t},setPath:function(a){"undefined"!==typeof a&&null!=a&&(r=("/"===a[0]?"":"/")+a);return t},setQuery:function(a){v=null;w=y(a,"?");return t},setFragment:function(a){x=null;n=y(a,"#");return t},setQP:k,setFP:l,setExistingP:function(a,b){void 0!==g(a,b)&&k(a,b);void 0!==h(a,b)&&l(a,b);return t},toString:function(){var a=f(),b=e();return[m(),r,""!==
a?"?":"",a,""!==b?"#":"",b].join("")}}}}();
gadgets.io=function(){function a(){var a;if("undefined"!=typeof shindig&&shindig.xhrwrapper&&shindig.xhrwrapper.createXHR)return shindig.xhrwrapper.createXHR();if("undefined"!=typeof ActiveXObject)return(a=new ActiveXObject("Msxml2.XMLHTTP"))||(a=new ActiveXObject("Microsoft.XMLHTTP")),a;if("undefined"!=typeof XMLHttpRequest||window.XMLHttpRequest)return new window.XMLHttpRequest;throw"no xhr available";}function b(a,b,c){if(4!==b.readyState)return!0;try{if(!(200==b.status||0==b.status)){var d=""+
b.status;b.responseText&&(d=d+" "+b.responseText);c({errors:[d],rc:b.status,text:b.responseText});return!0}}catch(f){return c({errors:[f.number+" Error not specified"],rc:f.number,text:f.description}),!0}return!1}function c(a,c,d,e){b(a,e,c)||c(f(d,{body:e.responseText}))}function d(a,c,d,e){if(!b(a,e,c)){e=e.responseText;var g=e.indexOf(k)+k.length;g<k.length||(e=e.substr(g),e=eval("("+e+")"),e=e[a],e.oauthState&&(h=e.oauthState),e.st&&shindig.auth.updateSecurityToken(e.st),c(f(d,e)))}}function f(a,
b){var c={text:b.body,rc:b.rc||200,headers:b.headers,oauthApprovalUrl:b.oauthApprovalUrl,oauthError:b.oauthError,oauthErrorText:b.oauthErrorText,errors:[]};if(200>c.rc||400<=c.rc)c.errors=[c.rc+" Error"];else if(void 0!==c.text&&null!==c.text)switch(300<=c.rc&&400>c.rc&&(a.CONTENT_TYPE="TEXT"),a.CONTENT_TYPE){case "JSON":case "FEED":c.data=gadgets.json.parse(c.text);c.data||(c.errors.push("500 Failed to parse JSON"),c.rc=500,c.data=null);break;case "DOM":var d;"undefined"!=typeof ActiveXObject?(d=
new ActiveXObject("Microsoft.XMLDOM"),d.async=!1,d.validateOnParse=!1,d.resolveExternals=!1,d.loadXML(c.text)?c.data=d:(c.errors.push("500 Failed to parse XML"),c.rc=500)):(d=(new DOMParser).parseFromString(c.text,"text/xml"),"parsererror"===d.documentElement.nodeName?(c.errors.push("500 Failed to parse XML"),c.rc=500):c.data=d);break;default:c.data=c.text}return c}function e(b,c,d,f,e,g,h,k){var r=a();0==c.indexOf("//")&&(c=document.location.protocol+c);r.open(e,c,!0);d&&(r.onreadystatechange=gadgets.util.makeClosure(null,
h,b,d,g,r));if(null!==f){b="application/x-www-form-urlencoded";"string"===typeof k&&(b=k,k={});k=k||{};k["Content-Type"]||(k["Content-Type"]=b);for(var w in k)r.setRequestHeader(w,k[w])}r.send(f)}var g={},h,k="throw 1; \x3c don't be evil' \x3e";gadgets.config.register("core.io",null,function(a){g=a["core.io"]||{}});return{makeRequest:function(a,b,c){c=c||{};var k=c.METHOD||"GET",q=c.REFRESH_INTERVAL,y,u;c.AUTHORIZATION&&"NONE"!==c.AUTHORIZATION?(y=c.AUTHORIZATION.toLowerCase(),u=shindig.auth.getSecurityToken()):
"GET"===k&&void 0===q&&(q=3600);var s=!0;"undefined"!==typeof c.OWNER_SIGNED&&(s=c.OWNER_SIGNED);var r=!0;"undefined"!==typeof c.VIEWER_SIGNED&&(r=c.VIEWER_SIGNED);var w=c.HEADERS||{};"POST"===k&&!w["Content-Type"]&&(w["Content-Type"]="application/x-www-form-urlencoded");var v=gadgets.util.getUrlParameters();u={url:a,httpMethod:k,headers:gadgets.io.encodeValues(w,!1),postData:c.POST_DATA||"",authz:y||"",st:u||"",contentType:c.CONTENT_TYPE||"TEXT",numEntries:c.NUM_ENTRIES||"3",getSummaries:!!c.GET_SUMMARIES,
signOwner:s,signViewer:r,gadget:v.url,container:v.container||v.synd||"default",bypassSpecCache:gadgets.util.getUrlParameters().nocache||"",getFullHeaders:!!c.GET_FULL_HEADERS};if("oauth"===y||"signed"===y){gadgets.io.oauthReceivedCallbackUrl_&&(u.OAUTH_RECEIVED_CALLBACK=gadgets.io.oauthReceivedCallbackUrl_,gadgets.io.oauthReceivedCallbackUrl_=null);u.oauthState=h||"";for(var n in c)c.hasOwnProperty(n)&&0===n.indexOf("OAUTH_")&&(u[n]=c[n])}y=g.jsonProxyUrl.replace("%host%",document.location.host);
a:{if(gadgets.io.preloaded_&&"GET"===u.httpMethod)for(n=0;n<gadgets.io.preloaded_.length;n++)if((s=gadgets.io.preloaded_[n])&&s.id===u.url){delete gadgets.io.preloaded_[n];200!==s.rc?b({rc:s.rc,errors:[s.rc+" Error"]}):(s.oauthState&&(h=s.oauthState),b(f(c,{body:s.body,rc:s.rc,headers:s.headers,oauthApprovalUrl:s.oauthApprovalUrl,oauthError:s.oauthError,oauthErrorText:s.oauthErrorText,errors:[]})));n=!0;break a}n=!1}n||("GET"===k&&0<q?(k="?refresh\x3d"+q+"\x26"+gadgets.io.encodeValues(u),e(a,y+k,
b,null,"GET",c,d)):e(a,y,b,gadgets.io.encodeValues(u),"POST",c,d))},makeNonProxiedRequest:function(a,b,d,f){d=d||{};e(a,a,b,d.POST_DATA,d.METHOD,d,c,f)},clearOAuthState:function(){h=void 0},encodeValues:function(a,b){var c=!b,d=[],f=!1,e;for(e in a)a.hasOwnProperty(e)&&!/___$/.test(e)&&(f?d.push("\x26"):f=!0,d.push(c?encodeURIComponent(e):e),d.push("\x3d"),d.push(c?encodeURIComponent(a[e]):a[e]));return d.join("")},getProxyUrl:function(a,b){var c=g.proxyUrl;if(!c)return c;var d=b||{},f=d.REFRESH_INTERVAL;
void 0===f&&(f="3600");var e=gadgets.util.getUrlParameters(),d=d.rewriteMime?"\x26rewriteMime\x3d"+encodeURIComponent(d.rewriteMime):"",c=c.replace("%url%",encodeURIComponent(a)).replace("%host%",document.location.host).replace("%rawurl%",a).replace("%refresh%",encodeURIComponent(f)).replace("%gadget%",encodeURIComponent(e.url)).replace("%container%",encodeURIComponent(e.container||e.synd||"default")).replace("%rewriteMime%",d);0==c.indexOf("//")&&(c=window.location.protocol+c);return c}}}();
gadgets.io.RequestParameters=gadgets.util.makeEnum("METHOD CONTENT_TYPE POST_DATA HEADERS AUTHORIZATION NUM_ENTRIES GET_SUMMARIES GET_FULL_HEADERS REFRESH_INTERVAL OAUTH_SERVICE_NAME OAUTH_USE_TOKEN OAUTH_TOKEN_NAME OAUTH_REQUEST_TOKEN OAUTH_REQUEST_TOKEN_SECRET OAUTH_RECEIVED_CALLBACK".split(" "));gadgets.io.MethodType=gadgets.util.makeEnum(["GET","POST","PUT","DELETE","HEAD"]);gadgets.io.ContentType=gadgets.util.makeEnum(["TEXT","DOM","JSON","FEED"]);
gadgets.io.AuthorizationType=gadgets.util.makeEnum(["NONE","SIGNED","OAUTH"]);tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.io,"encodeValues"],[gadgets.io,"getProxyUrl"],[gadgets.io,"makeRequest"]])});
(function(){osapi.newBatch=function(){var a={},b=[],c=function(a){var b={method:a.request.method,id:a.key};a.request.rpc&&(b.params=a.request.rpc);return b};a.execute=function(a){for(var f={},e={},g=0,h=[],k=0;k<b.length;k++){var l=b[k].request.transport;e[l.name]||(h.push(l),g++);e[l.name]=e[l.name]||[];e[l.name].push(c(b[k]))}k=function(c){c.error&&(f.error=c.error);for(var e=0;e<b.length;e++){var h=b[e].key,k=c[h];k&&(f[h]=k.error?k:k.data||k.result)}g--;0===g&&a(f)};for(l=0;l<h.length;l++)h[l].execute(e[h[l].name],
k);0==g&&window.setTimeout(function(){a(f)},0)};a.add=function(c,f){f&&c&&b.push({key:c,request:f});return a};return a}})();
osapi._registerMethod=function(a,b){if("newBatch"!==a){for(var c=a.split("."),d=osapi,f=0;f<c.length-1;f++)d[c[f]]=d[c[f]]||{},d=d[c[f]];var e=c[c.length-1],g;d[e]&&(g=d[e]);d[e]=function(c){c=c||{};c.userId=c.userId||"@viewer";c.groupId=c.groupId||"@self";return new osapi._BoundCall(a,b,c)};"undefined"!==typeof tamings___&&(c=function(){caja___.markTameAsFunction(d[e],a)},g&&g.__taming_index?(d[e].__taming_index=g.__taming_index,tamings___[g.__taming_index]=c):(d[e].__taming_index=tamings___.length,
tamings___.push(c)))}};osapi._BoundCall=function(a,b,c){this.method=a;this.transport=b;this.rpc=c};osapi._BoundCall.prototype.execute=function(a){var b="undefined"!==typeof caja___&&caja___.getUseless&&caja___.getUseless(),c=b?caja___.getUseless():this,d=b?caja___.untame(a):a;a=osapi.newBatch();a.add(this.method,this);a.execute(function(a){a.error?d.call(c,a.error):d.call(c,a[c.method])})};
tamings___.push(function(a){function b(){var a=osapi.newBatch();caja___.whitelistFuncs([[a,"add"],[a,"execute"]]);return caja___.tame(a)}caja___.markTameAsFunction(b,"newBatch");caja___.tamesTo(osapi.newBatch,b);caja___.whitelistCtors([[osapi,"_BoundCall",Object]]);caja___.whitelistMeths([[osapi._BoundCall,"execute"]])});gadgets.window=gadgets.window||{};
(function(){gadgets.window.getViewportDimensions=function(){var a=0,b=0;self.innerHeight?(a=self.innerWidth,b=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body&&(a=document.body.clientWidth,b=document.body.clientHeight);return{width:a,height:b}}})();tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.window,"getViewportDimensions"]])});
gadgets.window=gadgets.window||{};(function(){gadgets.window.getWidth=function(){var a=gadgets.window.getViewportDimensions().width,b=document.body,c=document.documentElement;if("CSS1Compat"===document.compatMode&&c&&c.scrollWidth)return c.scrollWidth!==a?c.scrollWidth:c.offsetWidth;if(b)return c=b.scrollWidth,b=b.offsetWidth,c>a&&c>b?c:b}})();tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.window,"getWidth"]])});gadgets.window=gadgets.window||{};
(function(){function a(a,c){window.getComputedStyle(a,"").getPropertyValue(c).match(/^([0-9]+)/);return parseInt(RegExp.$1,10)}gadgets.window.getHeight=function(){var b=gadgets.window.getViewportDimensions().height,c=document.body,d=document.documentElement;if("CSS1Compat"===document.compatMode&&d.scrollHeight)return d.scrollHeight!==b?d.scrollHeight:d.offsetHeight;if(0<=navigator.userAgent.indexOf("AppleWebKit")){b=0;for(c=[document.body];0<c.length;){var f=c.shift(),d=f.childNodes;if("undefined"!==
typeof f.style){var e=f.style.overflowY;e||(e=(e=document.defaultView.getComputedStyle(f,null))?e.overflowY:null);if("visible"!=e&&"inherit"!=e&&(e=f.style.height,e||(e=(e=document.defaultView.getComputedStyle(f,null))?e.height:""),0<e.length&&"auto"!=e))continue}for(f=0;f<d.length;f++){e=d[f];if("undefined"!==typeof e.offsetTop&&"undefined"!==typeof e.offsetHeight)var g=e.offsetTop+e.offsetHeight+a(e,"margin-bottom"),b=Math.max(b,g);c.push(e)}}return b+a(document.body,"border-bottom")+a(document.body,
"margin-bottom")+a(document.body,"padding-bottom")}if(c&&d)return f=d.scrollHeight,e=d.offsetHeight,d.clientHeight!==e&&(f=c.scrollHeight,e=c.offsetHeight),f>b?f>e?f:e:f<e?f:e}})();tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.window,"getHeight"]])});gadgets.i18n=gadgets.i18n||{};gadgets.i18n.dtFormatter_=null;gadgets.i18n.dtParser_=null;gadgets.i18n.numFormatter_=null;
gadgets.i18n.formatDateTime=function(a,b){gadgets.i18n.dtFormatter_?gadgets.i18n.dtFormatter_.patternInUse_!=a&&("string"==typeof a?gadgets.i18n.dtFormatter_.applyPattern(a):gadgets.i18n.dtFormatter_.applyStandardPattern(a),gadgets.i18n.dtFormatter_.patternInUse_=a):(gadgets.i18n.dtFormatter_=new gadgets.i18n.DateTimeFormat(gadgets.i18n.DateTimeConstants),"string"==typeof a?gadgets.i18n.dtFormatter_.applyPattern(a):gadgets.i18n.dtFormatter_.applyStandardPattern(a),gadgets.i18n.dtFormatter_.patternInUse_=
a);return gadgets.i18n.dtFormatter_.format(b)};
gadgets.i18n.parseDateTime=function(a,b,c,d){gadgets.i18n.dtParser_?gadgets.i18n.dtParser_.patternInUse_!=a&&("string"==typeof a?gadgets.i18n.dtParser_.applyPattern(a):gadgets.i18n.dtParser_.applyStandardPattern(a),gadgets.i18n.dtParser_.patternInUse_=a):(gadgets.i18n.dtParser_=new gadgets.i18n.DateTimeParse(gadgets.i18n.DateTimeConstants),"string"==typeof a?gadgets.i18n.dtParser_.applyPattern(a):gadgets.i18n.dtParser_.applyStandardPattern(a),gadgets.i18n.dtParser_.patternInUse_=a);return gadgets.i18n.dtParser_.parse(b,
c,d)};
gadgets.i18n.formatNumber=function(a,b,c){gadgets.i18n.numFormatter_?gadgets.i18n.numFormatter_.patternInUse_!=a&&("string"==typeof a?gadgets.i18n.numFormatter_.applyPattern(a,c):gadgets.i18n.numFormatter_.applyStandardPattern(a,c),gadgets.i18n.numFormatter_.patternInUse_=a):(gadgets.i18n.numFormatter_=new gadgets.i18n.NumberFormat(gadgets.i18n.NumberFormatConstants),"string"==typeof a?gadgets.i18n.numFormatter_.applyPattern(a,c):gadgets.i18n.numFormatter_.applyStandardPattern(a,c),gadgets.i18n.numFormatter_.patternInUse_=a);
return gadgets.i18n.numFormatter_.format(b)};
gadgets.i18n.parseNumber=function(a,b,c,d){if(gadgets.i18n.numFormatter_){if(gadgets.i18n.numFormatter_.patternInUse_!=a||gadgets.i18n.numFormatter_.currencyCodeInUse_!=d)"string"==typeof a?gadgets.i18n.numFormatter_.applyPattern(a,d):gadgets.i18n.numFormatter_.applyStandardPattern(a,d),gadgets.i18n.numFormatter_.patternInUse_=a,gadgets.i18n.numFormatter_.currencyCodeInUse_=d}else gadgets.i18n.numFormatter_=new gadgets.i18n.NumberFormat,"string"==typeof a?gadgets.i18n.numFormatter_.applyPattern(a,
d):gadgets.i18n.numFormatter_.applyStandardPattern(a,d),gadgets.i18n.numFormatter_.patternInUse_=a,gadgets.i18n.numFormatter_.currencyCodeInUse_=d;return gadgets.i18n.numFormatter_.parse(b,c)};gadgets.i18n.FULL_DATE_FORMAT=0;gadgets.i18n.LONG_DATE_FORMAT=1;gadgets.i18n.MEDIUM_DATE_FORMAT=2;gadgets.i18n.SHORT_DATE_FORMAT=3;gadgets.i18n.FULL_TIME_FORMAT=4;gadgets.i18n.LONG_TIME_FORMAT=5;gadgets.i18n.MEDIUM_TIME_FORMAT=6;gadgets.i18n.SHORT_TIME_FORMAT=7;gadgets.i18n.FULL_DATETIME_FORMAT=8;
gadgets.i18n.LONG_DATETIME_FORMAT=9;gadgets.i18n.MEDIUM_DATETIME_FORMAT=10;gadgets.i18n.SHORT_DATETIME_FORMAT=11;gadgets.i18n.DECIMAL_PATTERN=1;gadgets.i18n.SCIENTIFIC_PATTERN=2;gadgets.i18n.PERCENT_PATTERN=3;gadgets.i18n.CURRENCY_PATTERN=4;gadgets.i18n=gadgets.i18n||{};gadgets.i18n.DateTimeFormat=function(a){this.symbols_=a};gadgets.i18n.DateTimeFormat.TOKENS_=[/^\'(?:[^\']|\'\')*\'/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvzZ]+/];
gadgets.i18n.DateTimeFormat.PartTypes={QUOTED_STRING:0,FIELD:1,LITERAL:2};gadgets.i18n.DateTimeFormat.padNumber_=function(a,b){var c=String(a),d=c.indexOf(".");-1==d&&(d=c.length);return Array(Math.max(0,b-d)+1).join("0")+c};
gadgets.i18n.DateTimeFormat.prototype.applyPattern=function(a){for(this.patternParts_=[];a;)for(var b=0;b<gadgets.i18n.DateTimeFormat.TOKENS_.length;++b){var c=a.match(gadgets.i18n.DateTimeFormat.TOKENS_[b]);if(c){c=c[0];a=a.substring(c.length);b==gadgets.i18n.DateTimeFormat.PartTypes.QUOTED_STRING&&("''"==c?c="'":(c=c.substring(1,c.length-1),c=c.replace(/\'\'/,"'")));this.patternParts_.push({text:c,type:b});break}}};
gadgets.i18n.DateTimeFormat.prototype.format=function(a){for(var b=[],c=0;c<this.patternParts_.length;++c){var d=this.patternParts_[c].text;gadgets.i18n.DateTimeFormat.PartTypes.FIELD==this.patternParts_[c].type?b.push(this.formatField_(d,a)):b.push(d)}return b.join("")};
gadgets.i18n.DateTimeFormat.prototype.applyStandardPattern=function(a){var b;4>a?b=this.symbols_.DATEFORMATS[a]:8>a?b=this.symbols_.TIMEFORMATS[a-4]:12>a?b=this.symbols_.DATEFORMATS[a-8]+" "+this.symbols_.TIMEFORMATS[a-8]:this.applyStandardPattern(gadgets.i18n.MEDIUM_DATETIME_FORMAT);return this.applyPattern(b)};gadgets.i18n.DateTimeFormat.prototype.formatEra_=function(a,b){var c=0<b.getFullYear()?1:0;return 4<=a?this.symbols_.ERANAMES[c]:this.symbols_.ERAS[c]};
gadgets.i18n.DateTimeFormat.prototype.formatYear_=function(a,b){var c=b.getFullYear();0>c&&(c=-c);return 2==a?gadgets.i18n.DateTimeFormat.padNumber_(c%100,2):String(c)};gadgets.i18n.DateTimeFormat.prototype.formatMonth_=function(a,b){var c=b.getMonth();switch(a){case 5:return this.symbols_.NARROWMONTHS[c];case 4:return this.symbols_.MONTHS[c];case 3:return this.symbols_.SHORTMONTHS[c];default:return gadgets.i18n.DateTimeFormat.padNumber_(c+1,a)}};
gadgets.i18n.DateTimeFormat.prototype.format24Hours_=function(a,b){return gadgets.i18n.DateTimeFormat.padNumber_(b.getHours()||24,a)};gadgets.i18n.DateTimeFormat.prototype.formatFractionalSeconds_=function(a,b){return(b.getTime()%1E3/1E3).toFixed(Math.min(3,a)).substr(2)+(3<a?gadgets.i18n.DateTimeFormat.padNumber_(0,a-3):"")};gadgets.i18n.DateTimeFormat.prototype.formatDayOfWeek_=function(a,b){var c=b.getDay();return 4<=a?this.symbols_.WEEKDAYS[c]:this.symbols_.SHORTWEEKDAYS[c]};
gadgets.i18n.DateTimeFormat.prototype.formatAmPm_=function(a,b){var c=b.getHours();return this.symbols_.AMPMS[12<=c&&24>c?1:0]};gadgets.i18n.DateTimeFormat.prototype.format1To12Hours_=function(a,b){return gadgets.i18n.DateTimeFormat.padNumber_(b.getHours()%12||12,a)};gadgets.i18n.DateTimeFormat.prototype.format0To11Hours_=function(a,b){return gadgets.i18n.DateTimeFormat.padNumber_(b.getHours()%12,a)};
gadgets.i18n.DateTimeFormat.prototype.format0To23Hours_=function(a,b){return gadgets.i18n.DateTimeFormat.padNumber_(b.getHours(),a)};gadgets.i18n.DateTimeFormat.prototype.formatStandaloneDay_=function(a,b){var c=b.getDay();switch(a){case 5:return this.symbols_.STANDALONENARROWWEEKDAYS[c];case 4:return this.symbols_.STANDALONEWEEKDAYS[c];case 3:return this.symbols_.STANDALONESHORTWEEKDAYS[c];default:return gadgets.i18n.DateTimeFormat.padNumber_(c,1)}};
gadgets.i18n.DateTimeFormat.prototype.formatStandaloneMonth_=function(a,b){var c=b.getMonth();switch(a){case 5:return this.symbols_.STANDALONENARROWMONTHS[c];case 4:return this.symbols_.STANDALONEMONTHS[c];case 3:return this.symbols_.STANDALONESHORTMONTHS[c];default:return gadgets.i18n.DateTimeFormat.padNumber_(c+1,a)}};gadgets.i18n.DateTimeFormat.prototype.formatQuarter_=function(a,b){var c=Math.floor(b.getMonth()/3);return 4>a?this.symbols_.SHORTQUARTERS[c]:this.symbols_.QUARTERS[c]};
gadgets.i18n.DateTimeFormat.prototype.formatDate_=function(a,b){return gadgets.i18n.DateTimeFormat.padNumber_(b.getDate(),a)};gadgets.i18n.DateTimeFormat.prototype.formatMinutes_=function(a,b){return gadgets.i18n.DateTimeFormat.padNumber_(b.getMinutes(),a)};gadgets.i18n.DateTimeFormat.prototype.formatSeconds_=function(a,b){return gadgets.i18n.DateTimeFormat.padNumber_(b.getSeconds(),a)};
gadgets.i18n.DateTimeFormat.prototype.formatTimeZoneRFC_=function(a,b){if(4>a){var c=b.getTimezoneOffset(),d="-";0>c&&(c=-c,d="+");return d+gadgets.i18n.DateTimeFormat.padNumber_(5*(c/3)+c%60,4)}return this.formatGMT_(a,b)};gadgets.i18n.DateTimeFormat.prototype.formatGMT_=function(a,b){var c=b.getTimezoneOffset(),d=[];0<c?d.push("GMT-"):(c=-c,d.push("GMT+"));d.push(gadgets.i18n.DateTimeFormat.padNumber_(c/60,2));d.push(":");d.push(gadgets.i18n.DateTimeFormat.padNumber_(c%60,2));return d.join("")};
gadgets.i18n.DateTimeFormat.prototype.formatField_=function(a,b){var c=a.length;switch(a.charAt(0)){case "G":return this.formatEra_(c,b);case "y":return this.formatYear_(c,b);case "M":return this.formatMonth_(c,b);case "k":return this.format24Hours_(c,b);case "S":return this.formatFractionalSeconds_(c,b);case "E":return this.formatDayOfWeek_(c,b);case "a":return this.formatAmPm_(c,b);case "h":return this.format1To12Hours_(c,b);case "K":return this.format0To11Hours_(c,b);case "H":return this.format0To23Hours_(c,
b);case "c":return this.formatStandaloneDay_(c,b);case "L":return this.formatStandaloneMonth_(c,b);case "Q":return this.formatQuarter_(c,b);case "d":return this.formatDate_(c,b);case "m":return this.formatMinutes_(c,b);case "s":return this.formatSeconds_(c,b);case "v":return this.formatGMT_(c,b);case "z":return this.formatGMT_(c,b);case "Z":return this.formatTimeZoneRFC_(c,b);default:return""}};gadgets.i18n=gadgets.i18n||{};gadgets.i18n.DateTimeParse=function(a){this.symbols_=a};
gadgets.i18n.DateTimeParse.prototype.year=0;gadgets.i18n.DateTimeParse.prototype.month=0;gadgets.i18n.DateTimeParse.prototype.dayOfMonth=0;gadgets.i18n.DateTimeParse.prototype.hours=0;gadgets.i18n.DateTimeParse.prototype.minutes=0;gadgets.i18n.DateTimeParse.prototype.seconds=0;gadgets.i18n.DateTimeParse.prototype.milliseconds=0;gadgets.i18n.DateTimeParse.ambiguousYearCenturyStart=80;
gadgets.i18n.DateTimeParse.prototype.applyPattern=function(a){this.patternParts_=[];for(var b=!1,c="",d=0;d<a.length;d++){var f=a.charAt(d);if(" "==f){0<c.length&&(this.patternParts_.push({text:c,count:0,abutStart:!1}),c="");for(this.patternParts_.push({text:" ",count:0,abutStart:!1});d+1<a.length&&" "==a.charAt(d+1);)d++}else if(b)"'"==f?d+1<a.length&&"'"==a.charAt(d+1)?(c+=f,++d):b=!1:c+=f;else if(0<=gadgets.i18n.DateTimeParse.PATTERN_CHARS_.indexOf(f)){0<c.length&&(this.patternParts_.push({text:c,
count:0,abutStart:!1}),c="");var e=this.getNextCharCount_(a,d);this.patternParts_.push({text:f,count:e,abutStart:!1});d+=e-1}else"'"==f?d+1<a.length&&"'"==a.charAt(d+1)?(c+="'",d++):b=!0:c+=f}0<c.length&&this.patternParts_.push({text:c,count:0,abutStart:!1});this.markAbutStart_()};
gadgets.i18n.DateTimeParse.prototype.applyStandardPattern=function(a){var b;if(4>a)b=this.symbols_.DATEFORMATS[a];else if(8>a)b=this.symbols_.TIMEFORMATS[a-4];else if(12>a)b=this.symbols_.DATEFORMATS[a-8],b=b+" "+this.symbols_.TIMEFORMATS[a-8];else return this.applyStandardPattern(gadgets.i18n.MEDIUM_DATETIME_FORMAT);return this.applyPattern(b)};gadgets.i18n.DateTimeParse.prototype.parse=function(a,b,c){return this.internalParse_(a,b,c,!1)};
gadgets.i18n.DateTimeParse.prototype.internalParse_=function(a,b,c,d){for(var f=new gadgets.i18n.DateTimeParse.MyDate_,e=[b],g=-1,h=0,k=0,l=0;l<this.patternParts_.length;++l)if(0<this.patternParts_[l].count)if(0>g&&this.patternParts_[l].abutStart&&(g=l,h=b,k=0),0<=g){var m=this.patternParts_[l].count;if(l==g&&(m-=k,k++,0==m))return 0;this.subParse_(a,e,this.patternParts_[l],m,f)||(l=g-1,e[0]=h)}else{if(g=-1,!this.subParse_(a,e,this.patternParts_[l],0,f))return 0}else{g=-1;if(" "==this.patternParts_[l].text.charAt(0)){if(m=
e[0],this.skipSpace_(a,e),e[0]>m)continue}else if(a.indexOf(this.patternParts_[l].text,e[0])==e[0]){e[0]+=this.patternParts_[l].text.length;continue}return 0}return f.calcDate_(c,d)?e[0]-b:0};gadgets.i18n.DateTimeParse.prototype.getNextCharCount_=function(a,b){for(var c=a.charAt(b),d=b+1;d<a.length&&a.charAt(d)==c;)++d;return d-b};gadgets.i18n.DateTimeParse.PATTERN_CHARS_="GyMdkHmsSEDahKzZv";gadgets.i18n.DateTimeParse.NUMERIC_FORMAT_CHARS_="MydhHmsSDkK";
gadgets.i18n.DateTimeParse.prototype.isNumericField_=function(a){if(0>=a.count)return!1;var b=gadgets.i18n.DateTimeParse.NUMERIC_FORMAT_CHARS_.indexOf(a.text.charAt(0));return 0<b||0==b&&3>a.count};gadgets.i18n.DateTimeParse.prototype.markAbutStart_=function(){for(var a=!1,b=0;b<this.patternParts_.length;b++)this.isNumericField_(this.patternParts_[b])?!a&&(b+1<this.patternParts_.length&&this.isNumericField_(this.patternParts_[b+1]))&&(a=!0,this.patternParts_[b].abutStart=!0):a=!1};
gadgets.i18n.DateTimeParse.prototype.skipSpace_=function(a,b){var c=a.substring(b[0]).match(/^\s+/);c&&(b[0]+=c[0].length)};
gadgets.i18n.DateTimeParse.prototype.subParse_=function(a,b,c,d,f){this.skipSpace_(a,b);var e=b[0],g=c.text.charAt(0),h=-1;if(this.isNumericField_(c))if(0<d){if(e+d>a.length)return!1;h=this.parseInt_(a.substring(0,e+d),b)}else h=this.parseInt_(a,b);switch(g){case "G":return f.era=this.matchString_(a,b,this.symbols_.ERAS),!0;case "M":return this.subParseMonth_(a,b,f,h);case "E":return this.subParseDayOfWeek_(a,b,f);case "a":return f.ampm=this.matchString_(a,b,this.symbols_.AMPMS),!0;case "y":return this.subParseYear_(a,
b,e,h,c,f);case "d":return f.day=h,!0;case "S":return this.subParseFractionalSeconds_(h,b,e,f);case "h":12==h&&(h=0);case "K":case "H":case "k":return f.hours=h,!0;case "m":return f.minutes=h,!0;case "s":return f.seconds=h,!0;case "z":case "Z":case "v":return this.subparseTimeZoneInGMT_(a,b,f);default:return!1}};
gadgets.i18n.DateTimeParse.prototype.subParseYear_=function(a,b,c,d,f,e){var g;if(0>d){g=a.charAt(b[0]);if("+"!=g&&"-"!=g)return!1;b[0]++;d=this.parseInt_(a,b);if(0>d)return!1;"-"==g&&(d=-d)}null==g&&2==b[0]-c&&2==f.count?e.setTwoDigitYear_(d):e.year=d;return!0};gadgets.i18n.DateTimeParse.prototype.subParseMonth_=function(a,b,c,d){if(0>d){d=this.matchString_(a,b,this.symbols_.MONTHS);0>d&&(d=this.matchString_(a,b,this.symbols_.SHORTMONTHS));if(0>d)return!1;c.month=d}else c.month=d-1;return!0};
gadgets.i18n.DateTimeParse.prototype.subParseDayOfWeek_=function(a,b,c){var d=this.matchString_(a,b,this.symbols_.WEEKDAYS);0>d&&(d=this.matchString_(a,b,this.symbols_.SHORTWEEKDAYS));if(0>d)return!1;c.dayOfWeek=d;return!0};gadgets.i18n.DateTimeParse.prototype.subParseFractionalSeconds_=function(a,b,c,d){b=b[0]-c;d.milliseconds=3>b?a*Math.pow(10,3-b):Math.round(a/Math.pow(10,b-3));return!0};
gadgets.i18n.DateTimeParse.prototype.subparseTimeZoneInGMT_=function(a,b,c){a.indexOf("GMT",b[0])==b[0]&&(b[0]+=3);return this.parseTimeZoneOffset_(a,b,c)};
gadgets.i18n.DateTimeParse.prototype.parseTimeZoneOffset_=function(a,b,c){if(b[0]>=a.length)return c.tzOffset=0,!0;var d=1;switch(a.charAt(b[0])){case "-":d=-1;case "+":b[0]++}var f=b[0],e=this.parseInt_(a,b);if(0==e&&b[0]==f)return!1;var g;if(b[0]<a.length&&":"==a.charAt(b[0])){g=60*e;b[0]++;f=b[0];e=this.parseInt_(a,b);if(0==e&&b[0]==f)return!1;g+=e}else g=e,24>g&&2>=b[0]-f&&(g*=60),g=g%100+60*(g/100);c.tzOffset=-(g*d);return!0};
gadgets.i18n.DateTimeParse.prototype.parseInt_=function(a,b){var c=a.substring(b[0]).match(/^\d+/);if(!c)return-1;b[0]+=c[0].length;return parseInt(c[0],10)};gadgets.i18n.DateTimeParse.prototype.matchString_=function(a,b,c){var d=0,f=-1;a=a.substring(b[0]).toLowerCase();for(var e=0;e<c.length;++e){var g=c[e].length;g>d&&0==a.indexOf(c[e].toLowerCase())&&(f=e,d=g)}0<=f&&(b[0]+=d);return f};gadgets.i18n.DateTimeParse.MyDate_=function(){};
gadgets.i18n.DateTimeParse.MyDate_.prototype.setTwoDigitYear_=function(a){var b=(new Date).getFullYear()-gadgets.i18n.DateTimeParse.ambiguousYearCenturyStart,c=b%100;this.ambiguousYear=a==c;return this.year=a+=100*Math.floor(b/100)+(a<c?100:0)};
gadgets.i18n.DateTimeParse.MyDate_.prototype.calcDate_=function(a,b){void 0!=this.era&&(void 0!=this.year&&0==this.era&&0<this.year)&&(this.year=-(this.year-1));void 0!=this.year&&a.setFullYear(this.year);var c=a.getDate();a.setDate(1);void 0!=this.month&&a.setMonth(this.month);void 0!=this.day?a.setDate(this.day):a.setDate(c);void 0==this.hours&&(this.hours=a.getHours());void 0!=this.ampm&&0<this.ampm&&12>this.hours&&(this.hours+=12);a.setHours(this.hours);void 0!=this.minutes&&a.setMinutes(this.minutes);
void 0!=this.seconds&&a.setSeconds(this.seconds);void 0!=this.milliseconds&&a.setMilliseconds(this.milliseconds);if(b&&(void 0!=this.year&&this.year!=a.getFullYear()||void 0!=this.month&&this.month!=a.getMonth()||void 0!=this.dayOfMonth&&this.dayOfMonth!=a.getDate()||24<=this.hours||60<=this.minutes||60<=this.seconds||1E3<=this.milliseconds))return!1;void 0!=this.tzOffset&&(c=a.getTimezoneOffset(),a.setTime(a.getTime()+6E4*(this.tzOffset-c)));this.ambiguousYear&&(c=new Date,c.setFullYear(c.getFullYear()-
gadgets.i18n.DateTimeParse.ambiguousYearCenturyStart),a.getTime()<c.getTime()&&a.setFullYear(c.getFullYear()+100));if(void 0!=this.dayOfWeek)if(void 0==this.day){c=(7+this.dayOfWeek-a.getDay())%7;3<c&&(c-=7);var d=a.getMonth();a.setDate(a.getDate()+c);a.getMonth()!=d&&a.setDate(a.getDate()+(0<c?-7:7))}else if(this.dayOfWeek!=a.getDay())return!1;return!0};gadgets.i18n=gadgets.i18n||{};gadgets.i18n.NumberFormat=function(a){this.symbols_=a};
gadgets.i18n.NumberFormat.prototype.applyStandardPattern=function(a,b){switch(a){case gadgets.i18n.DECIMAL_PATTERN:this.applyPattern(this.symbols_.DECIMAL_PATTERN,b);break;case gadgets.i18n.SCIENTIFIC_PATTERN:this.applyPattern(this.symbols_.SCIENTIFIC_PATTERN,b);break;case gadgets.i18n.PERCENT_PATTERN:this.applyPattern(this.symbols_.PERCENT_PATTERN,b);break;case gadgets.i18n.CURRENCY_PATTERN:this.applyPattern(this.symbols_.CURRENCY_PATTERN,b);break;default:throw Error("Unsupported pattern type.");
}};
gadgets.i18n.NumberFormat.prototype.applyPattern=function(a,b){this.pattern_=a;this.intlCurrencyCode_=b||this.symbols_.DEF_CURRENCY_CODE;this.currencySymbol_=gadgets.i18n.CurrencyCodeMap[this.intlCurrencyCode_];this.maximumIntegerDigits_=40;this.minimumIntegerDigits_=1;this.maximumFractionDigits_=3;this.minExponentDigits_=this.minimumFractionDigits_=0;this.positiveSuffix_=this.positivePrefix_="";this.negativePrefix_="-";this.negativeSuffix_="";this.multiplier_=1;this.groupingSize_=3;this.useExponentialNotation_=this.isCurrencyFormat_=
this.decimalSeparatorAlwaysShown_=!1;this.parsePattern_(this.pattern_)};
gadgets.i18n.NumberFormat.prototype.parse=function(a,b){var c=b||[0],d=c[0],f=0,e=a.indexOf(this.positivePrefix_,c[0])==c[0],g=a.indexOf(this.negativePrefix_,c[0])==c[0];e&&g&&(this.positivePrefix_.length>this.negativePrefix_.length?g=!1:this.positivePrefix_.length<this.negativePrefix_.length&&(e=!1));e?c[0]+=this.positivePrefix_.length:g&&(c[0]+=this.negativePrefix_.length);a.indexOf(this.symbols_.INFINITY,c[0])==c[0]?(c[0]+=this.symbols_.INFINITY.length,f=Infinity):f=this.parseNumber_(a,c);if(e){if(a.indexOf(this.positiveSuffix_,
c[0])!=c[0])return c[0]=d,0;c[0]+=this.positiveSuffix_.length}else if(g){if(a.indexOf(this.negativeSuffix_,c[0])!=c[0])return c[0]=d,0;c[0]+=this.negativeSuffix_.length}return g?-f:f};
gadgets.i18n.NumberFormat.prototype.parseNumber_=function(a,b){for(var c=!1,d=!1,f=!1,e=1,g=this.isCurrencyFormat_?this.symbols_.MONETARY_SEP:this.symbols_.DECIMAL_SEP,h=this.isCurrencyFormat_?this.symbols_.MONETARY_GROUP_SEP:this.symbols_.GROUP_SEP,k=this.symbols_.EXP_SYMBOL,l="";b[0]<a.length;b[0]++){var m=a.charAt(b[0]),p=this.getDigit_(m);if(0<=p&&9>=p)l+=p,f=!0;else if(m==g.charAt(0)){if(c||d)break;l+=".";c=!0}else if(m==h.charAt(0)||" "==h.charAt(0)&&" "==m&&b[0]+1<a.length&&0<=this.getDigit_(a.charAt(b[0]+
1))){if(c||d)break}else if(m==k.charAt(0)){if(d)break;l+="E";d=!0}else if("+"==m||"-"==m)l+=m;else if(m==this.symbols_.PERCENT.charAt(0)){if(1!=e)break;e=100;if(f){b[0]++;break}}else if(m==this.symbols_.PERMILL.charAt(0)){if(1!=e)break;e=1E3;if(f){b[0]++;break}}else break}return parseFloat(l)/e};
gadgets.i18n.NumberFormat.prototype.format=function(a){if(isNaN(a))return this.symbols_.NAN;var b=[],c=0>a||0==a&&0>1/a;b.push(c?this.negativePrefix_:this.positivePrefix_);isFinite(a)?(a=a*(c?-1:1)*this.multiplier_,this.useExponentialNotation_?this.subformatExponential_(a,b):this.subformatFixed_(a,this.minimumIntegerDigits_,b)):b.push(this.symbols_.INFINITY);b.push(c?this.negativeSuffix_:this.positiveSuffix_);return b.join("")};
gadgets.i18n.NumberFormat.prototype.subformatFixed_=function(a,b,c){var d=Math.pow(10,this.maximumFractionDigits_);a=Math.round(a*d);var f=Math.floor(a/d),e=Math.floor(a-f*d),g=0<this.minimumFractionDigits_||0<e,h="";for(a=f;1E20<a;)h="0"+h,a=Math.round(a/10);var h=a+h,k=this.isCurrencyFormat_?this.symbols_.MONETARY_SEP:this.symbols_.DECIMAL_SEP,l=this.isCurrencyFormat_?this.symbols_.MONETARY_GROUP_SEP:this.symbols_.GROUP_SEP;a=this.symbols_.ZERO_DIGIT.charCodeAt(0);var m=h.length;if(0<f||0<b){for(f=
m;f<b;f++)c.push(this.symbols_.ZERO_DIGIT);for(f=0;f<m;f++)c.push(String.fromCharCode(a+1*h.charAt(f))),1<m-f&&(0<this.groupingSize_&&1==(m-f)%this.groupingSize_)&&c.push(l)}else g||c.push(this.symbols_.ZERO_DIGIT);(this.decimalSeparatorAlwaysShown_||g)&&c.push(k);b=""+(e+d);for(d=b.length;"0"==b.charAt(d-1)&&d>this.minimumFractionDigits_+1;)d--;for(f=1;f<d;f++)c.push(String.fromCharCode(a+1*b.charAt(f)))};
gadgets.i18n.NumberFormat.prototype.addExponentPart_=function(a,b){b.push(this.symbols_.EXP_SYMBOL);0>a&&(a=-a,b.push(this.symbols_.MINUS_SIGN));for(var c=""+a,d=c.length;d<this.minExponentDigits_;d++)b.push(this.symbols_.ZERO_DIGIT);b.push(c)};
gadgets.i18n.NumberFormat.prototype.subformatExponential_=function(a,b){if(0==a)this.subformatFixed_(a,this.minimumIntegerDigits_,b),this.addExponentPart_(0,b);else{var c=Math.floor(Math.log(a)/Math.log(10));a/=Math.pow(10,c);var d=this.minimumIntegerDigits_;if(1<this.maximumIntegerDigits_&&this.maximumIntegerDigits_>this.minimumIntegerDigits_){for(;0!=c%this.maximumIntegerDigits_;)a*=10,c--;d=1}else 1>this.minimumIntegerDigits_?(c++,a/=10):(c-=this.minimumIntegerDigits_-1,a*=Math.pow(10,this.minimumIntegerDigits_-
1));this.subformatFixed_(a,d,b);this.addExponentPart_(c,b)}};gadgets.i18n.NumberFormat.prototype.getDigit_=function(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=this.symbols_.ZERO_DIGIT.charCodeAt(0);return b<=a&&a<b+10?a-b:-1};gadgets.i18n.NumberFormat.PATTERN_ZERO_DIGIT_="0";gadgets.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_=",";gadgets.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_=".";gadgets.i18n.NumberFormat.PATTERN_PER_MILLE_="‰";gadgets.i18n.NumberFormat.PATTERN_PERCENT_="%";
gadgets.i18n.NumberFormat.PATTERN_DIGIT_="#";gadgets.i18n.NumberFormat.PATTERN_SEPARATOR_=";";gadgets.i18n.NumberFormat.PATTERN_EXPONENT_="E";gadgets.i18n.NumberFormat.PATTERN_MINUS_="-";gadgets.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_="¤";gadgets.i18n.NumberFormat.QUOTE_="'";
gadgets.i18n.NumberFormat.prototype.parseAffix_=function(a,b){for(var c="",d=!1,f=a.length;b[0]<f;b[0]++){var e=a.charAt(b[0]);if(e==gadgets.i18n.NumberFormat.QUOTE_)b[0]+1<f&&a.charAt(b[0]+1)==gadgets.i18n.NumberFormat.QUOTE_?(b[0]++,c+="'"):d=!d;else if(d)c+=e;else switch(e){case gadgets.i18n.NumberFormat.PATTERN_DIGIT_:case gadgets.i18n.NumberFormat.PATTERN_ZERO_DIGIT_:case gadgets.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_:case gadgets.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_:case gadgets.i18n.NumberFormat.PATTERN_SEPARATOR_:return c;
case gadgets.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_:this.isCurrencyFormat_=!0;b[0]+1<f&&a.charAt(b[0]+1)==gadgets.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_?(b[0]++,c+=this.intlCurrencyCode_):c+=this.currencySymbol_;break;case gadgets.i18n.NumberFormat.PATTERN_PERCENT_:if(1!=this.multiplier_)throw Error("Too many percent/permill");this.multiplier_=100;c+=this.symbols_.PERCENT;break;case gadgets.i18n.NumberFormat.PATTERN_PER_MILLE_:if(1!=this.multiplier_)throw Error("Too many percent/permill");this.multiplier_=
1E3;c+=this.symbols_.PERMILL;break;default:c+=e}}return c};
gadgets.i18n.NumberFormat.prototype.parseTrunk_=function(a,b){for(var c=-1,d=0,f=0,e=0,g=-1,h=a.length,k=!0;b[0]<h&&k;b[0]++)switch(a.charAt(b[0])){case gadgets.i18n.NumberFormat.PATTERN_DIGIT_:0<f?e++:d++;0<=g&&0>c&&g++;break;case gadgets.i18n.NumberFormat.PATTERN_ZERO_DIGIT_:if(0<e)throw Error('Unexpected "0" in pattern "'+a+'"');f++;0<=g&&0>c&&g++;break;case gadgets.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_:g=0;break;case gadgets.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_:if(0<=c)throw Error('Multiple decimal separators in pattern "'+
a+'"');c=d+f+e;break;case gadgets.i18n.NumberFormat.PATTERN_EXPONENT_:if(this.useExponentialNotation_)throw Error('Multiple exponential symbols in pattern "'+a+'"');this.useExponentialNotation_=!0;for(this.minExponentDigits_=0;b[0]+1<h&&a.charAt(b[0]+1)==this.symbols_.ZERO_DIGIT.charAt(0);)b[0]++,this.minExponentDigits_++;if(1>d+f||1>this.minExponentDigits_)throw Error('Malformed exponential pattern "'+a+'"');k=!1;break;default:b[0]--,k=!1}0==f&&(0<d&&0<=c)&&(f=c,0==f&&f++,e=d-f,d=f-1,f=1);if(0>c&&
0<e||0<=c&&(c<d||c>d+f)||0==g)throw Error('Malformed pattern "'+a+'"');e=d+f+e;this.maximumFractionDigits_=0<=c?e-c:0;0<=c&&(this.minimumFractionDigits_=d+f-c,0>this.minimumFractionDigits_&&(this.minimumFractionDigits_=0));this.minimumIntegerDigits_=(0<=c?c:e)-d;this.useExponentialNotation_&&(this.maximumIntegerDigits_=d+this.minimumIntegerDigits_,0==this.maximumFractionDigits_&&0==this.minimumIntegerDigits_&&(this.minimumIntegerDigits_=1));this.groupingSize_=Math.max(0,g);this.decimalSeparatorAlwaysShown_=
0==c||c==e};gadgets.i18n.NumberFormat.prototype.parsePattern_=function(a){var b=[0];this.positivePrefix_=this.parseAffix_(a,b);var c=b[0];this.parseTrunk_(a,b);c=b[0]-c;this.positiveSuffix_=this.parseAffix_(a,b);b[0]<a.length&&a.charAt(b[0])==gadgets.i18n.NumberFormat.PATTERN_SEPARATOR_&&(b[0]++,this.negativePrefix_=this.parseAffix_(a,b),b[0]+=c,this.negativeSuffix_=this.parseAffix_(a,b))};gadgets.i18n=gadgets.i18n||{};
gadgets.i18n.CurrencyCodeMap={USD:"$",ARS:"$",AWG:"ƒ",AUD:"$",BSD:"$",BBD:"$",BEF:"₣",BZD:"$",BMD:"$",BOB:"$",BRL:"R$",BRC:"₢",GBP:"£",BND:"$",KHR:"៛",CAD:"$",KYD:"$",CLP:"$",CNY:"¥",COP:"₱",CRC:"₡",CUP:"₱",CYP:"£",DKK:"kr",DOP:"₱",XCD:"$",EGP:"£",SVC:"₡",EUR:"€",XEU:"₠",FKP:"£",FJD:"$",FRF:"₣",GIP:"£",GRD:"₯",GGP:"£",GYD:"$",NLG:"ƒ",HKD:"$",INR:"₨",IRR:"﷼",IEP:"£",IMP:"£",ILS:"₪",ITL:"₤",JMD:"$",JPY:"¥",JEP:"£",KPW:"₩",KRW:"₩",LAK:"₭",LBP:"£",LRD:"$",LUF:"₣",MTL:"₤",MUR:"₨",MXN:"$",MNT:"₮",NAD:"$",
NPR:"₨",ANG:"ƒ",NZD:"$",OMR:"﷼",PKR:"₨",PEN:"S/.",PHP:"₱",QAR:"﷼",RUB:"руб",SHP:"£",SAR:"﷼",SCR:"₨",SGD:"$",SBD:"$",ZAR:"R",ESP:"₧",LKR:"₨",SEK:"kr",SRD:"$",SYP:"£",TWD:"元",THB:"฿",TTD:"$",TRY:"₤",TRL:"₤",TVD:"$",UYU:"₱",VAL:"₤",VND:"₫",YER:"﷼",ZWD:"$"};